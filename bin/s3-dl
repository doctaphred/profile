#!/usr/bin/env bash -euxo pipefail

# A nicer way to download files from s3, preserving their prefixes.
#
# Args:
# $1: local base directory
# $2: bucket name
# $3: pattern (remember to quote the '*' character if calling from bash!)

aws s3 sync "s3://$2/" "$1/$2/" --exclude "*" --include "$3"
